<!-- tripjournal.tripjournalui.view.AttachmentsDialog -->
<core:FragmentDefinition
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  xmlns:up="sap.m.upload">

  <Dialog id="attDlg"
          title="{i18n>attachmentsTitle}"
          contentHeight="60%"
          contentWidth="48rem"
          afterClose=".onAttClose">
    <content>
      <VBox id="_IDGenVBox1" class="sapUiSmallMargin">
        <Text id="_IDGenText22" text="{i18n>attachmentsHint}" wrapping="true"/>

        <up:UploadSet id="attUploadSet"
              uploadUrl="{att>/uploadUrl}"
              instantUpload="true"
              uploadEnabled="{att>/canUpload}"
              beforeUploadStarts=".onAttBeforeUploadStarts"
              uploadCompleted=".onAttUploadCompleted"
              noDataText="{i18n>attachmentsEmptyText}">

          <!-- Minimal toolbar: only Close (no Download button) -->
          <up:toolbar>
            <OverflowToolbar id="_IDGenOverflowToolbar">
              <ToolbarSpacer id="_IDGenToolbarSpacer3"/>
              <Button id="_IDGenButton7" text="{i18n>close}" press=".onAttClose"/>
            </OverflowToolbar>
          </up:toolbar>

          <!-- Item template: clicking the file name downloads it -->
          <up:items>
            <up:UploadSetItem id="_IDGenUploadSetItem"
              fileName="{FileName}"
              mediaType="{MimeType}"
              uploadState="Complete"
              openPressed=".onAttOpenItem"
              visibleEdit="false"
              visibleRemove="false">
              <up:attributes>
                <ObjectAttribute id="_IDGenObjectAttribute7" title="{i18n>attachmentUploadedBy}" text="{Username}"/>
                <ObjectAttribute id="_IDGenObjectAttribute8" title="{i18n>attachmentCreatedAt}"
                                 text="{path: 'CreatedAt', type: 'sap.ui.model.type.DateTime', formatOptions: { style: 'medium' } }"/>
                <ObjectAttribute id="_IDGenObjectAttribute9" title="{i18n>attachmentSize}" text="{Size}"/>
              </up:attributes>
            </up:UploadSetItem>
          </up:items>

        </up:UploadSet>
      </VBox>
    </content>
  </Dialog>
</core:FragmentDefinition>
